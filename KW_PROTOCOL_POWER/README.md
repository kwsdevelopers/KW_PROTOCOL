# Программа обмена по CAN, согласно протокола для МК Artery (AT32F407)

Проект создан в среде разработки Keil uVision.

Описание ПО отвечающего за обмена информации по CAN В рамках проекта Поток.

ПО разракбатано для обмена информацией между модулями изделия на основе прпотокола, который был разработан ранее.
Условное название данного ПО "kw protocol". Данное ПО находится в одноименной папке.

Описание модулей ПО

kw_proto_cfg.h - модуль конфингурации, где можно выбрать в когой роли будет работать данное ПО -
силовой модуль, дисплей или КИП6, выбирается Модуль CAN в микроконтроллере, скорость, число фаз, входов и выходов.

kw_protocol.c и kw_protocol.h - "головной модуль" ПО - его функции вызываются в главном цикле пмрограммы.

kw_proto_module.h - описывает интерфейс каждого конкретного модуля

kw_proto_module_display.c kw_proto_module_display.h, 
kw_proto_module_power.c kw_proto_module_power.h, 
kw_proto_module_kip6.c kw_proto_module_kip6.h - реализация функционала модулей.

kw_proto_vars.c kw_proto_vars.h - описывает интерфейс работы с переменными и их ощий функционала

kw_proto_vars_power.c kw_proto_vars_power.h 
kw_proto_vars_display.c kw_proto_vars_display.h 
kw_proto_vars_kip6.c kw_proto_vars_kip6.h - реализация работы с переменными каждого конкретного модуля.

kw_proto_enums.h - описывает константы протокола

kw_proto_structs.h - описывает структуры протокола

kw_proto_sys.c kw_proto_sys.h - реализация "системной" части протокола

kw_proto_pack_unpack.c kw_proto_pack_unpack.h - реализация упавковки и расапаковки "целевой" части протокола


Для интеграции данного ПО нужно модифицировать файл kw_proto_vars_XXXXXXX.c - где запрашиваются переменные устройства для передачи по протолколу
или "вытаскиваются" из протокола и должны сохраняться в устройстве. 

На данный момент реализован функционал силового модуля. Остальные модули будут реализованы позже.







